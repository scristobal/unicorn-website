---
import Layout from '@layouts/base.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

let team = await getCollection('team');
let professors = team.filter((person) => person.data.position === 'Professor');
let postdoctorals = team.filter((person) => person.data.position === 'Postdoctoral');
let phds = team.filter((person) => person.data.position === 'PhD Student');

team = [...professors, ...postdoctorals, ...phds];
---

<Layout title="Team" description="Unicorn team members">
    <div class="flex flex-col gap-0 justify-center items-start flex-wrap mx-auto">
        {
            team.map((person) => (
                <div class="relative">
                    <a href={`/team/${person.slug}`} class="block h-40 aspect-square" rel="prefetch">
                        <Image
                            alt={`${person.data.name} profile picture`}
                            src={person.data.photo}
                            width={600}
                            height={600}
                            class="object-cover rounded-sm h-full w-full grayscale hover:grayscale-0 transition ease-in-out delay-150 "
                            transition:name={'img-'.concat(person.data.photo.src)}
                        />
                        <p
                            class="absolute bottom-2 ranslate-y-2 text-center font-raleway text-xl text-gray-200 mix-blend-hard-light w-full"
                            transition:name={'name-'.concat(person.data.name)}>
                            {person.data.position}
                        </p>
                        <p
                            class="absolute bottom-6 ranslate-y-2 text-center font-aleo text-xl text-white mix-blend-hard-light font-bold w-full"
                            transition:name={'position-'.concat(person.data.name)}>
                            {person.data.name}
                        </p>
                    </a>
                </div>
            ))
        }
    </div>
</Layout>
